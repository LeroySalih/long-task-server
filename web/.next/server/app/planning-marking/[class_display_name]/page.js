(()=>{var e={};e.id=684,e.ids=[684],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},35900:e=>{"use strict";e.exports=require("pg")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},63477:e=>{"use strict";e.exports=require("querystring")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},81599:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>o}),t(17928),t(46804),t(35954),t(35866);var r=t(23191),n=t(88716),a=t(37922),i=t.n(a),l=t(95231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);t.d(s,d);let o=["",{children:["planning-marking",{children:["[class_display_name]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,17928)),"/Users/leroysalih/Long-task-svr-001/web/app/planning-marking/[class_display_name]/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,46804)),"/Users/leroysalih/Long-task-svr-001/web/app/planning-marking/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,35954)),"/Users/leroysalih/Long-task-svr-001/web/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/leroysalih/Long-task-svr-001/web/app/planning-marking/[class_display_name]/page.tsx"],u="/planning-marking/[class_display_name]/page",m={require:t,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/planning-marking/[class_display_name]/page",pathname:"/planning-marking/[class_display_name]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},34312:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,79404,23))},64616:(e,s,t)=>{"use strict";t.d(s,{Z:()=>d});var r=t(71603),n=t(61519);let a=e=>{let s=r.ou.fromISO(e);return(0,n.YL)(s)},i=e=>{let s=r.ou.fromISO(e);return(0,n.XW)(s)},l=e=>{let s=r.ou.fromISO(e);return(0,n.IZ)(s)},d=e=>{if(void 0===e||void 0===e.assignments)return["noClassPlanningData"];let{assignments:s}=e,t=[],r=s.filter(e=>a(e.assignment.due_date_time))||[];0==r.length&&t.push("hasNoAssignmentsInCurrentWeek"),0===((s.filter(e=>i(e.assignment.due_date_time))||[]).length||0)&&t.push("hasNoAssignmentsInNextWeek");let n=!1;if((s.filter(e=>l(e.assignment.due_date_time))||[]).length>0){for(let e of r)if(e.outcomes.filter(e=>null===e.points).length>0){n=!0;break}n&&t.push("hasUnmarkedInPrevWeek")}return t}},61519:(e,s,t)=>{"use strict";t.d(s,{G:()=>n,IZ:()=>d,Pv:()=>a,XW:()=>l,YL:()=>i});var r=t(71603);let n=e=>e.startOf("week").plus({week:"Sun"===e.weekdayShort?1:0}).minus({day:1}),a=e=>n(e).plus({days:7}),i=e=>{let s=r.ou.now(),t=n(e),i=a(e);return s>=t&&s<i},l=e=>{let s=n(r.ou.local()).plus({weeks:1}),t=s.plus({days:7});return e>=s&&e<t},d=e=>{r.ou.local();let s=n(e).minus({weeks:1}),t=s.plus({days:7});return e>=s&&e<t}},17928:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>m,dynamic:()=>u});var r=t(19510),n=t(29),a=t(71603),i=t(52359),l=t(61519),d=t(64616),o=t(33829),c=t(74062);let u="force-dynamic",m=async({params:e})=>{let{class_display_name:s}=e;s=decodeURIComponent(s);let t=(0,l.G)(a.ou.now()),u=t.minus({weeks:2}),m=t.plus({weeks:2}),{data:p,error:g}=await (0,i.N)(u,m),j=p?.filter(e=>e.class_display_name==s),v=j&&j.length>0&&(0,d.Z)(j[0]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.Z,{children:["Details for ",s]}),(0,r.jsxs)("div",{className:"flex flex-row m-3",children:[(0,r.jsxs)("form",{action:o.handleUpdateAssignmentsByClassTag,children:[r.jsx("input",{value:s,name:"classTag",type:"hidden"}),(0,r.jsxs)(c.Z,{children:["Refresh Assignments for ",s]})]}),(0,r.jsxs)("form",{action:o.handleUpdateOutcomesByClassTag,children:[r.jsx("input",{value:s,name:"classTag",type:"hidden"}),(0,r.jsxs)(c.Z,{children:["Refresh Marking for ",s]})]})]}),r.jsx(h,{checks:v}),r.jsx("div",{children:j&&void 0!==j[0]&&void 0!==j[0].assignments?"":r.jsx("div",{children:"No Data"})}),r.jsx("div",{children:j?.map((e,s)=>r.jsx("div",{children:e.assignments.sort((e,s)=>e.assignment.due_date_time>s.assignment.due_date_time?-1:1).map((e,s)=>r.jsx("div",{children:r.jsx(x,{assignmentDetails:e.assignment,outcomes:e.outcomes})},s))},s))})]})},x=({assignmentDetails:e,outcomes:s})=>{let{outcomeCount:t,notMarked:n,notCompleted:i}={outcomeCount:s.length,notMarked:s.filter(e=>null===e.points).length,notCompleted:s.filter(e=>0===e.points).length},d=a.ou.fromISO(e.due_date_time);return(0,l.G)(d),(0,l.Pv)(d),(0,r.jsxs)("div",{className:`border-solid border-slate-400 border-2 rounded-lg m-2 p-2 ${(e=>{if((0,l.YL)(e))return"bg-green-200/50"})(a.ou.fromISO(e.due_date_time))} text-slate-800`,children:[r.jsx("div",{children:e.display_name}),(0,r.jsxs)("div",{children:["Curr:   ",d.toISODate()]}),(0,r.jsxs)("div",{className:"flex text-xs align-middle",children:[r.jsx(p,{outcomeCount:t,notMarked:n,notCompleted:i}),(0,r.jsxs)("div",{className:"ml-2",children:["(",n," Not marked, ",i," Not completed)"]}),(0,r.jsxs)("form",{action:o.handleUpdateOutcomesByAssignmentID,children:[r.jsx("input",{value:e.assignment_id,name:"assignment_id",type:"hidden"}),r.jsx("button",{className:"ml-2",children:"Refresh"})]})]}),(0,r.jsxs)("details",{children:[r.jsx("summary",{children:"Details"}),s?.map((e,s)=>r.jsxs("p",{children:[e.givenname," ",e.surname," ",null==e.points?"not marked":e.points]},s))]})]})},p=({outcomeCount:e,notMarked:s,notCompleted:t})=>{let n=s/e*100,a=(e-s-t)/e*100;return r.jsx("div",{children:(0,r.jsxs)("svg",{width:"100",height:"30",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("defs",{children:r.jsx("clipPath",{id:"round-corner",children:r.jsx("rect",{x:"0",y:"0",width:"100",height:"20",rx:"5",ry:"5"})})}),r.jsx("rect",{x:"0",y:"0",width:n,height:"20",fill:"silver",clipPath:"url(#round-corner)"}),r.jsx("rect",{x:n,y:"0",width:a,height:"20",fill:"green",clipPath:"url(#round-corner)"}),r.jsx("rect",{x:n+a,y:"0",width:t/e*100,height:"20",fill:"red",clipPath:"url(#round-corner)"})]})})},h=({checks:e})=>void 0===e||!1===e?r.jsx(r.Fragment,{children:"No Alert Data Available"}):r.jsx(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex flex-row",children:[r.jsx("div",{className:`m-1 p-2 rounded-md ${e.includes("hasNoAssignmentsInNextWeek")?"bg-red-500":"bg-slate-100"} `,children:"Next week not planned"}),r.jsx("div",{className:`m-1 p-2 rounded-md ${e.includes("hasNoAssignmentsInCurrentWeek")?"bg-red-500":"bg-slate-100"} `,children:"Current week not planned"}),r.jsx("div",{className:`m-1 p-2 rounded-md ${e.includes("hasUnmarkedInPrevWeek")?"bg-red-500":"bg-slate-100"}`,children:"Last week not marked"})]})})},46804:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>j});var r=t(19510);t(71159);var n=t(29),a=t(57371),i=t(64616);let l=({data:e,cl:s})=>r.jsx(r.Fragment,{children:r.jsx("div",{className:"flex m-1",children:r.jsx(a.default,{href:`/planning-marking/${encodeURIComponent(s)}`,children:r.jsx("div",{className:`${((e,s)=>{if(!e)return"bg-slate-300";let t=(0,i.Z)(e);return t&&0===t.length?"bg-green-700":"bg-red-700"})(e,0)} rounded-xl text-white text-xs p-1 pl-2  pr-2 w-auto border-green-400 border-solid border-4`,children:s})})})}),d=({subject:e,data:s,classes:t})=>r.jsx(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex",children:[r.jsx("div",{className:"text-2xl w-1/4",children:e}),r.jsx("div",{className:"flex",children:t&&t.map((e,t)=>r.jsx(l,{cl:e,data:s?.filter(s=>s.class_display_name==e)[0]},t))})]})});var o=t(71603),c=t(35900),u=t.n(c),m=t(46812),x=t(52359),p=t(61519);let{Client:h,Pool:g}=u();new g(m.T);let j=async({children:e})=>{let s=(0,p.G)(o.ou.now()),t=s.minus({weeks:52}),a=s.plus({weeks:52}),{data:i,error:l}=await (0,x.N)(t,a);return void 0===i||l?(0,r.jsxs)("pre",{children:[JSON.stringify(i,null,2)," ",JSON.stringify(l,null,2)]}):r.jsx("div",{children:(0,r.jsxs)("div",{className:"grid grid-flow-col auto-cols-max grid-cols-12 items-start",children:[(0,r.jsxs)("div",{className:"grid col-span-6 ",children:[r.jsx(n.Z,{children:"Planning Marking"}),(0,r.jsxs)("div",{className:"grid",children:[r.jsx(d,{subject:"BS",classes:["23-13BS","23-12BS"],data:i}),r.jsx(d,{subject:"BS",classes:["23-11BS1","23-11BS2","23-10BS1","23-10BS2"],data:i}),r.jsx(d,{subject:"EC",classes:["23-11EC1","23-10EC1","23-10EC2"],data:i}),r.jsx(d,{subject:"IT",classes:["23-11IT","23-10IT"],data:i}),r.jsx(d,{subject:"CS",classes:["23-11CS","23-10CS"],data:i}),r.jsx(d,{subject:"DT",classes:["23-11DT","23-10DT"],data:i}),r.jsx(d,{subject:"9IT",classes:["23-9AIT1","23-9BIT1","23-9CIT1"],data:i}),r.jsx(d,{subject:"8IT",classes:["23-8AIT1","23-8BIT1","23-8CIT1"],data:i}),r.jsx(d,{subject:"7IT",classes:["23-7A/IT1","23-7B/It1","23-7C/It1","23-7D/It1"],data:i}),r.jsx(d,{subject:"9DT",classes:["23-9A/Dt","23-9B/Dt","23-9C/Dt"],data:i}),r.jsx(d,{subject:"8DT",classes:["23-8A-DT","23-8B-DT","23-8C-DT"],data:i}),r.jsx(d,{subject:"7DT",classes:["23-7A/Dt1","23-7B/DT1","23-7C/Dt1","23-7D/Dt1"],data:i})]})," "]}),r.jsx("div",{className:"grid col-span-6",children:r.jsx("div",{children:e})})]})})}}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[948,111,621,729,92,775,603,595,370],()=>t(81599));module.exports=r})();